{"version":3,"file":"index.js","sources":["../src/js/artists.js","../src/js/refs.js","../src/js/axios.js","../src/js/render.js","../src/js/handlers.js","../src/main.js"],"sourcesContent":["// src/js/artists.js\n// Працює без модалки. Рендерить 8 карток, Load More підвантажує ще.\n// Іконки у <use> очікуються у public/ (наприклад: public/icons.svg, public/img/artists.svg)\n\nimport axios from 'axios';\n\n// Базова адреса API\naxios.defaults.baseURL = 'https://sound-wave.b.goit.study/api';\n\nconst LIMIT = 8;\nlet currentPage = 1;\n\nwindow.addEventListener('DOMContentLoaded', initArtists);\n\nfunction qs(sel) {\n  return document.querySelector(sel);\n}\n\nasync function initArtists() {\n  const listEl = qs('.artists-list');\n  const loadBtn = qs('.artists-load-more-btn');\n  const loaderEl = qs('.loader');\n\n  if (!listEl || !loadBtn) {\n    console.error(\n      '[artists] .artists-list або .artists-load-more-btn не знайдено у DOM'\n    );\n    return;\n  }\n\n  // Початковий рендер\n  await renderPage(1);\n\n  // Події\n  loadBtn.addEventListener('click', onLoadMore);\n  // listEl.addEventListener('click', onArtistCardClick);\n\n  async function onLoadMore() {\n    showLoader(true);\n    loadBtn.style.display = 'none';\n\n    currentPage += 1;\n    const items = await fetchArtists(currentPage, LIMIT);\n\n    listEl.insertAdjacentHTML('beforeend', createArtistsMarkup(items));\n    toggleLoadMore(loadBtn, items.length);\n\n    showLoader(false);\n    if (loadBtn.style.display !== 'none') loadBtn.style.display = 'flex';\n  }\n\n  function showLoader(on) {\n    loaderEl?.classList.toggle('visually-hidden', !on);\n  }\n}\n\nasync function renderPage(page) {\n  const listEl = qs('.artists-list');\n  const loadBtn = qs('.artists-load-more-btn');\n  const loaderEl = qs('.loader');\n\n  loaderEl?.classList.remove('visually-hidden');\n\n  const items = await fetchArtists(page, LIMIT);\n  listEl.innerHTML = createArtistsMarkup(items);\n  toggleLoadMore(loadBtn, items.length);\n\n  loaderEl?.classList.add('visually-hidden');\n}\n\nasync function fetchArtists(page = 1, limit = LIMIT) {\n  try {\n    const { data } = await axios.get('/artists', {\n      params: { page, limit },\n      headers: { Accept: 'application/json' },\n    });\n\n    // Нормалізація форми відповіді\n    const list = Array.isArray(data)\n      ? data\n      : Array.isArray(data?.artists)\n      ? data.artists\n      : Array.isArray(data?.results)\n      ? data.results\n      : data?.items ?? [];\n\n    return list;\n  } catch (e) {\n    console.error('[artists] fetchArtists error:', e);\n    return []; // фолбек, щоб рендер не падав\n  }\n}\n\nfunction toggleLoadMore(btn, receivedLen) {\n  // Якщо прийшло менше за limit — ховаємо кнопку\n  btn.style.display = receivedLen < LIMIT ? 'none' : 'flex';\n}\n\n// ==== шаблон та хелпери ====\n\nfunction createArtistsMarkup(arr = []) {\n  return arr\n    .map(({ _id, genres, strArtist, strArtistThumb, strBiographyEN }) => {\n      const img = strArtistThumb || './img/placeholders/artist@1x.jpg'; // поклади плейсхолдер у public/img/placeholders/\n      const name = strArtist || 'Unknown';\n      const tags = toGenresArray(genres)\n        .map(\n          g =>\n            `<li class=\"artists-genres-item\">${escapeHtml(cleanText(g))}</li>`\n        )\n        .join('');\n\n      return `\n<li class=\"artists-card-item\">\n  <img class=\"artists-image\" src=\"${img}\" alt=\"${escapeHtml(\n        name\n      )}\" loading=\"lazy\" />\n  <ul class=\"artists-genres-list\">${tags}</ul>\n  <p class=\"artists-name\">${escapeHtml(name)}</p>\n  <p class=\"artists-information\">${textClamp(strBiographyEN || '', 144)}</p>\n  <button class=\"artists-learn-more-card-btn open-artist-modal\" data-artist-id=\"${_id}\">\n    Learn More\n    <svg class=\"caret-right-icon\" width=\"8\" height=\"16\" aria-hidden=\"true\" focusable=\"false\">\n      <use href=\"./icons-artists.svg#icon-caret-right\"></use>\n    </svg>\n  </button>\n</li>`;\n    })\n    .join('');\n}\n\nfunction toGenresArray(genres) {\n  if (Array.isArray(genres)) return genres;\n  if (typeof genres === 'string') {\n    return genres\n      .split(/[,/]/)\n      .map(s => s.trim())\n      .filter(Boolean);\n  }\n  return [];\n}\n\nfunction cleanText(text = '') {\n  return String(text).replace(/[,/]/g, ' ');\n}\n\nfunction textClamp(text = '', maxDesktop = 144) {\n  const w = window.innerWidth;\n  const max = w < 768 ? 60 : w < 1440 ? 160 : maxDesktop;\n  const s = String(text);\n  return s.length > max ? s.slice(0, max) + '…' : s;\n}\n\nfunction escapeHtml(str = '') {\n  return String(str).replace(\n    /[&<>\"']/g,\n    m =>\n      ({\n        '&': '&amp;',\n        '<': '&lt;',\n        '>': '&gt;',\n        '\"': '&quot;',\n        \"'\": '&#39;',\n      }[m])\n  );\n}\n","export const refs = {\n  modal: document.getElementById('artistModal'),\n  modalClose: document.getElementById('modalClose'),\n  modalContentWrapper: document.querySelector('.modal__content'),\n  modalContent: document.getElementById('modal-content'),\n  loader: document.getElementById('globalLoader'),\n  artists: document.querySelector('.artists-section'),\n};","import axios from 'axios';\r\nimport iziToast from 'izitoast';\r\nimport { refs } from './refs';\r\nlet loadingCount = 0;\r\n\r\naxios.defaults.baseURL = 'https://sound-wave.b.goit.study/api';\r\naxios.defaults.timeout = 10000;\r\n\r\nexport function showLoader() {\r\n  loadingCount++;\r\n  if (refs.loader && loadingCount === 1) {\r\n    refs.loader.classList.add('active');\r\n  }\r\n}\r\n\r\nexport function hideLoader() {\r\n  loadingCount = Math.max(0, loadingCount - 1);\r\n  if (refs.loader && loadingCount === 0) {\r\n    refs.loader.classList.remove('active');\r\n  }\r\n}\r\n\r\nexport function showError(message, title = 'Error') {\r\n  iziToast.error({\r\n    title,\r\n    message,\r\n    position: 'topRight',\r\n    timeout: 7000,\r\n    backgroundColor: 'orange',\r\n  });\r\n}\r\n\r\nexport function showSuccess(message, title = 'Success') {\r\n  iziToast.success({\r\n    title,\r\n    message,\r\n    position: 'topRight',\r\n    timeout: 2000,\r\n    backgroundColor: 'aqua',\r\n  });\r\n}\r\n\r\naxios.interceptors.request.use(\r\n  config => {\r\n    showLoader();\r\n    return config;\r\n  },\r\n  error => {\r\n    hideLoader();\r\n    showError('Request error');\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\naxios.interceptors.response.use(\r\n  response => {\r\n    hideLoader();\r\n    return response;\r\n  },\r\n  error => {\r\n    hideLoader();\r\n    const message = error.response\r\n      ? `Error ${error.response.status}: ${error.response.statusText}`\r\n      : 'Network error, please check your connection';\r\n    showError(message);\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport async function getArtistDetails(id) {\r\n  const response = await axios.get(`/artists/${id}`);\r\n\r\n  return response.data;\r\n}\r\n\r\nexport async function getArtistAlbums(id) {\r\n  const response = await axios.get(`/artists/${id}/albums`);\r\n  return response.data;\r\n}\r\n","import boxicons from 'boxicons';\r\nimport 'boxicons/css/boxicons.min.css';\r\nimport simpleSvgPlaceholder from '@cloudfour/simple-svg-placeholder';\r\nimport { refs } from './refs';\r\n\r\nfunction formatDuration(ms) {\r\n  if (!ms) return '0:00';\r\n\r\n  let totalSeconds = Math.floor(ms / 1000);\r\n  let hours = Math.floor(totalSeconds / 3600);\r\n  let minutes = Math.floor((totalSeconds % 3600) / 60);\r\n  let seconds = totalSeconds % 60;\r\n\r\n  if (hours > 0) {\r\n    return (\r\n      hours +\r\n      ':' +\r\n      (minutes < 10 ? '0' + minutes : minutes) +\r\n      ':' +\r\n      (seconds < 10 ? '0' + seconds : seconds)\r\n    );\r\n  }\r\n\r\n  return minutes + ':' + (seconds < 10 ? '0' + seconds : seconds);\r\n}\r\n\r\nfunction formatYearsActive(start, end) {\r\n  if (start && end) return `${start}–${end}`;\r\n  if (start) return `${start}–present`;\r\n  return 'Information missing';\r\n}\r\n\r\nfunction getPlaceholderDataUri(text = 'No Image', width = 150, height = 150) {\r\n  const svgString = simpleSvgPlaceholder({\r\n    width,\r\n    height,\r\n    text,\r\n    fontSize: 14,\r\n    fontFamily: '\"IBM Plex Sans\", sans-serif',\r\n    fillColor: '#ddd',\r\n    textColor: '#aaa',\r\n    backgroundColor: '#f0f0f0',\r\n  });\r\n\r\n  const base64 = btoa(svgString);\r\n  return `data:image/svg+xml;base64,${base64}`;\r\n}\r\n\r\nexport function renderModalContent(artist, albums) {\r\n  const {\r\n    strArtist,\r\n    strArtistThumb,\r\n    intFormedYear,\r\n    intDiedYear,\r\n    strGender,\r\n    intMembers,\r\n    strCountry,\r\n    strBiographyEN,\r\n    genres,\r\n  } = artist;\r\n\r\n  const modalBiography = strBiographyEN || '';\r\n  const splitAt = modalBiography.indexOf('.', 250);\r\n\r\n  const collapsedBio =\r\n    splitAt !== -1\r\n      ? modalBiography.slice(0, splitAt + 1)\r\n      : modalBiography.slice(0, 250);\r\n\r\n  let expanded = false;\r\n\r\n  const { albumsList } = albums;\r\n\r\n  const yearsActive = formatYearsActive(intFormedYear, intDiedYear);\r\n\r\n  const genresMarkup = [...genres]\r\n    ? `\r\n  <ul id=\"genres-list\">${genres\r\n    .map(\r\n      genre => `<li class=\"genre\">\r\n          <p class=\"genre-text\">${genre}</p>\r\n        </li>`\r\n    )\r\n    .join('')}</ul>\r\n  `\r\n    : '<ul id=\"genres-list\"></ul>';\r\n  const photoSrc = strArtistThumb || getPlaceholderDataUri('No Image');\r\n\r\n  let albumsHTML = '';\r\n  if (albumsList && albumsList.length) {\r\n    albumsHTML = `\r\n      <h3 id=\"albums-title\">Albums</h3>\r\n      <ul id=\"albums-list\">\r\n        ${albumsList.map(album => createAlbumHTML(album)).join('')}\r\n      </ul>\r\n    `;\r\n  }\r\n\r\n  const modalContentHTML = `\r\n  <h1 id=\"artist-name\">${strArtist}</h1>\r\n  <div id=\"modal-top-wrapper\">\r\n    <div id=\"modal-artist-photo\">\r\n      <img id=\"artist-photo\" src=\"${photoSrc}\" alt=\"${strArtist}\" onerror=\"onerror=null;src='${getPlaceholderDataUri()}'\"/>\r\n    </div>\r\n    <div id=\"artist-intro-wrapper\">\r\n      <div class=\"intro-box\">\r\n        <h4 class=\"artist-details-heading\">Years active</h4>\r\n        <p class=\"artist-details-info\">${yearsActive}</p>\r\n      </div>\r\n      <div class=\"intro-box\">\r\n        <h4 class=\"artist-details-heading\">Sex</h4>\r\n        <p class=\"artist-details-info\"> ${strGender ? strGender : ''}</p>\r\n      </div>\r\n      <div class=\"intro-box\">\r\n        <h4 class=\"artist-details-heading\">Members</h4>\r\n        <p class=\"artist-details-info\"> ${intMembers ? intMembers : ''}</p>\r\n      </div>\r\n      <div class=\"intro-box\">\r\n        <h4 class=\"artist-details-heading\">Country</h4>        <p class=\"artist-details-info\"> ${\r\n          strCountry ? strCountry.slice(strCountry.lastIndexOf(',') + 2) : ''\r\n        }</p>\r\n      </div>\r\n      <div id=\"bio-data\">\r\n        <h4 class=\"artist-details-heading\">Biography</h4>\r\n        <p class=\"artist-details-info\">${collapsedBio}</p>\r\n        <button type=\"button\" id=\"bio-load-more\">\r\n          <i class=\"bx bx-caret-down bx-tada-hover\" style=\"color:#fff; background-color:transparent\"></i>\r\n        </button>\r\n      </div>\r\n      ${genresMarkup}\r\n    </div>\r\n  </div>\r\n  ${albumsHTML}\r\n`;\r\n\r\n  refs.modalContent.insertAdjacentHTML('afterbegin', modalContentHTML);\r\n\r\n  const artistBioText = document.querySelector(\r\n    '#bio-data > .artist-details-info'\r\n  );\r\n  const modalBioIcon = document.querySelector('#bio-load-more > .bx');\r\n\r\n  document.querySelector('#bio-load-more').addEventListener('click', () => {\r\n    expanded = !expanded;\r\n    if (expanded) {\r\n      artistBioText.textContent = modalBiography;\r\n      modalBioIcon.classList.replace('bx-caret-down', 'bx-caret-up');\r\n    } else {\r\n      artistBioText.textContent = collapsedBio;\r\n      modalBioIcon.classList.replace('bx-caret-up', 'bx-caret-down');\r\n    }\r\n  });\r\n}\r\n\r\nfunction createAlbumHTML(album) {\r\n  const { tracks, strAlbum } = album;\r\n  let tracksHTML = '';\r\n  if (tracks && tracks.length) {\r\n    tracksHTML = `\r\n          <div id=\"track-list-headers\">\r\n            <span>Track</span>\r\n            <span>Time</span>\r\n            <span>Link</span>\r\n          </div>\r\n          <ul>\r\n          ${tracks\r\n            .map(\r\n              ({ strTrack, intDuration, movie }) => `\r\n            <li class=\"song\">\r\n              <span class=\"track-name\">${strTrack}</span>\r\n              <span class=\"track-duration\">${\r\n                formatDuration(intDuration) || 'N/A'\r\n              }</span>\r\n              <span class=\"track-link\">\r\n                ${\r\n                  movie\r\n                    ? `<a href=\"${movie}\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n                      <i class=\"bx bxl-youtube bx-tada\" style=\"color: #fff\"></i>\r\n                    </a>\r\n                    `\r\n                    : '<span></span>'\r\n                }\r\n              </span>\r\n            </li>`\r\n            )\r\n            .join('')}\r\n          </ul>\r\n      `;\r\n  }\r\n\r\n  return `\r\n    <li class=\"album\">\r\n      <h4 class=\"album-details-heading\">${strAlbum}</h4>\r\n      ${tracksHTML}\r\n    </li>\r\n  `;\r\n}\r\n// src/js/render.js\r\n//export function showLoader() {\r\n//  document.querySelector('.loader-container')?.classList.remove('hidden');\r\n//}\r\n\r\n//export function hideLoader() {\r\n// document.querySelector('.loader-container')?.classList.add('hidden');\r\n\r\n//}\r\n","import { refs } from './refs.js';\nimport {\n  getArtistDetails,\n  getArtistAlbums,\n  showLoader,\n  hideLoader,\n} from './axios';\nimport { renderModalContent } from './render.js';\n\nasync function openModal(artistId = '65ada69eaf9f6d155db48612') {\n  refs.modal.classList.add('active');\n  document.body.classList.add('modal-open');\n  refs.modalContent.innerHTML =\n    '<div class=\"modal-loading\">Loading artist details...</div>';\n  showLoader();\n\n  try {\n    const [artistData, albumsData] = await Promise.all([\n      getArtistDetails(artistId),\n      getArtistAlbums(artistId),\n    ]);\n    refs.modalContent.innerHTML = '';\n    renderModalContent(artistData, albumsData);\n  } catch (error) {\n    refs.modalContent.innerHTML = `<div class=\"modal-error\">Failed to load artist details due to ${error}.</div>`;\n  } finally {\n    hideLoader();\n    if (\n      refs.modalContentWrapper.scrollHeight >\n      refs.modalContentWrapper.offsetHeight\n    ) {\n      refs.modalContentWrapper.style.overflowY = 'scroll';\n      refs.modalContentWrapper.style.overflowX = 'hidden';\n    }\n  }\n}\n\nexport function handleModalOpening(e) {\n  let id = '';\n  if (\n    e.target.nodeName === 'BUTTON' &&\n    e.target.classList.contains('artists-learn-more-card-btn')\n  ) {\n    id = e.target.getAttribute('data-artist-id') || '';\n    openModal(id);\n    refs.modalClose.addEventListener('click', closeModal);\n    refs.modal.addEventListener('click', ev => {\n      if (ev.target === refs.modal) {\n        closeModal();\n      }\n    });\n  } else {\n    return;\n  }\n}\n\nfunction clearListeners() {\n  refs.modalClose.removeEventListener('click', closeModal);\n  refs.modal.removeEventListener('click', ev => {\n    if (ev.target === refs.modal) {\n      closeModal();\n    }\n  });\n}\n\nexport function closeModal() {\n  refs.modal.classList.remove('active');\n  document.body.classList.remove('modal-open');\n  clearListeners();\n\n  setTimeout(() => {\n    refs.modalContent.innerHTML = '';\n  }, 300);\n}\n","import './js/artists.js';\nimport axios from 'axios';\nimport iziToast from 'izitoast';\nimport boxicons from 'boxicons';\n\nimport { refs } from './js/refs';\nimport { closeModal, handleModalOpening } from './js/handlers';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const logoLinks = document.querySelectorAll('.logo, .logo-mobile');\n\n  logoLinks.forEach(logo => {\n    logo.addEventListener('click', e => {\n      e.preventDefault(); // блокуємо стандартний #scroll\n      window.location.reload(); // повний reset сторінки\n    });\n  });\n\n  const openBtn = document.getElementById('open-menu');\n  const closeBtn = document.getElementById('close-menu');\n  const mobileMenu = document.getElementById('mobile-menu');\n  const mobileLinks = mobileMenu?.querySelectorAll('.nav-list-mobile a') || [];\n\n  if (!openBtn || !closeBtn || !mobileMenu) return;\n\n  const openMenu = () => {\n    mobileMenu.classList.add('open');\n    mobileMenu.classList.remove('hidden');\n    document.body.style.overflow = 'hidden';\n    openBtn.setAttribute('aria-expanded', 'true');\n  };\n\n  const closeMenu = () => {\n    mobileMenu.classList.remove('open');\n    setTimeout(() => mobileMenu.classList.add('hidden'), 300);\n    document.body.style.overflow = '';\n    openBtn.setAttribute('aria-expanded', 'false');\n    openBtn.focus(); // повертаємо фокус на бургер\n  };\n\n  // Відкрити/закрити\n  openBtn.addEventListener('click', openMenu);\n  closeBtn.addEventListener('click', closeMenu);\n\n  // Закриття по кліку на пункт меню\n  mobileLinks.forEach(a => a.addEventListener('click', closeMenu));\n\n  // Закриття по кліку поза меню\n  document.addEventListener('click', e => {\n    if (\n      mobileMenu.classList.contains('open') &&\n      !mobileMenu.contains(e.target) &&\n      e.target !== openBtn\n    ) {\n      closeMenu();\n    }\n  });\n\n  // Закриття по Esc\n  document.addEventListener('keydown', e => {\n    if (e.key === 'Escape' && mobileMenu.classList.contains('open')) {\n      closeMenu();\n    }\n  });\n\n  if (refs.artists) {\n    refs.artists.addEventListener('click', handleModalOpening);\n  }\n\n  window.addEventListener('hashchange', () => {\n    if (mobileMenu.classList.contains('open')) closeMenu();\n  });\n\n  // Закрити при ресайзі на ширину планшета/десктопа\n  window.addEventListener('resize', () => {\n    if (window.innerWidth >= 768 && mobileMenu.classList.contains('open')) {\n      closeMenu();\n    }\n  });\n});\n\n\n\ndocument.addEventListener('keydown', e => {\n  if (e.key === 'Escape' && refs.modal.classList.contains('active')) {\n    closeModal();\n  }\n});\n"],"names":["axios","LIMIT","currentPage","initArtists","qs","sel","listEl","loadBtn","loaderEl","renderPage","onLoadMore","showLoader","items","fetchArtists","createArtistsMarkup","toggleLoadMore","on","page","limit","data","e","btn","receivedLen","arr","_id","genres","strArtist","strArtistThumb","strBiographyEN","img","name","tags","toGenresArray","g","escapeHtml","cleanText","textClamp","s","text","maxDesktop","w","max","str","m","refs","loadingCount","hideLoader","showError","message","title","iziToast","config","error","response","getArtistDetails","id","getArtistAlbums","formatDuration","ms","totalSeconds","hours","minutes","seconds","formatYearsActive","start","end","getPlaceholderDataUri","width","height","svgString","simpleSvgPlaceholder","renderModalContent","artist","albums","intFormedYear","intDiedYear","strGender","intMembers","strCountry","modalBiography","splitAt","collapsedBio","expanded","albumsList","yearsActive","genresMarkup","genre","photoSrc","albumsHTML","album","createAlbumHTML","modalContentHTML","artistBioText","modalBioIcon","tracks","strAlbum","tracksHTML","strTrack","intDuration","movie","openModal","artistId","artistData","albumsData","handleModalOpening","closeModal","ev","clearListeners","logo","openBtn","closeBtn","mobileMenu","mobileLinks","openMenu","closeMenu","a"],"mappings":"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"}